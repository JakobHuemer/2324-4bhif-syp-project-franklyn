<div>
  <table class="screen-height container-fluid w-100">
    <tr class="screen-height w-100">
      <td
        class="bg-light left-bar-width resize-cursor"
        appColumnResize>
        <div class="no-cursor-resize align-top pt-3">
          @if(curExam | async){
            <div class="overflow-scroll height-examinee-list">
              <h5 class="fw-bold text-center">{{(curExam | async)!.title}}</h5>
              <p class="text-center">
                Pin: {{(curExam | async)!.pin}}
                <br>
                Schüleranzahl: {{amountOfExamineesOnline() + amountOfExamineesOffline()}}
                <br>
                Online: {{amountOfExamineesOnline()}} | Offline: {{amountOfExamineesOffline()}}
              </p>
              <app-examinee-list></app-examinee-list>
            </div>
          }
        </div>
      </td>
      <td>
        @if (curExam | async) {
          <div class="selector-width w-auto align-top pt-2 px-3 screen-height d-flex justify-content-center align-items-start w-100">
            <app-patrol-page-examinee
              [examId]="(curExam | async)!.id"
              [examinee]="store.value.patrolModeModel.patrol.patrolExaminee"
              [showImage]="true"/>
          </div>
        } @else {
          <div class="selector-width w-auto align-top pt-2 px-3 screen-height d-flex justify-content-center align-items-center">
            <h1 class="text-center text-danger fw-bold">No exam selected</h1>
          </div>
        }
      </td>
    </tr>
  </table>
</div>


<div class="d-flex justify-content-around fixed-bottom bg-light py-2 bottom-bar-height">
  <div class="text-center align-self-center pointer-hover" (click)="setPatrolMode()">
    <label class="pointer-hover">
      Patrol-mode: <label class="pointer-hover"
                          [class]="getPatrolModeOnStateClass()">{{getPatrolModeOnState()}}</label>
    </label>
  </div>

  <div
    class="text-center align-self-center pointer-hover"
    type="button"
    data-bs-toggle="modal"
    data-bs-target="#change-patrol-speed-modal">
    <label>
      Patrol speed: {{store.value.scheduleServiceModel.timer.patrolSpeed}} sec
    </label>
  </div>

  <div
    class="text-center align-self-center"
    data-bs-toggle="tooltip"
    data-bs-placement="top"
    title="Der Zeitabstand zwischen den Screenshots, die auf den Schüler-PCs aufgenommen werden.">
    <label>
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle"
           viewBox="0 0 16 16">
        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
        <path
          d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>
      </svg>
      Screenshot capture interval:
      @if (curExam | async) {
        {{(curExam | async)!.screencaptureIntervalSeconds}} sec
      } @else {
        0 sec
      }
    </label>
  </div>

  <div class="text-center align-self-center">
    <button
      type="button"
      class="btn btn-danger"
      [class.active]="!store.value.patrolModeModel.curExamId"
      (click)="stopCurExam()">
      Test beenden
    </button>
  </div>
</div>

<div
  class="modal fade"
  id="change-patrol-speed-modal"
  tabindex="-1"
  aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5">Change the patrol-speed</h1>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close">
        </button>
      </div>
      <div class="modal-body">
        <p>
          Patrol speed in seconds:
        </p>
        <input #patrolSpeedInput
               type="number"
               class="form-control"
               value="{{store.value.scheduleServiceModel.timer.patrolSpeed}}">
      </div>
      <div class="modal-footer">
        <button
          class="btn btn-secondary"
          data-bs-dismiss="modal">
          Cancel
        </button>

        <button
          (click)="setPatrolSpeed(patrolSpeedInput.value)"
          class="btn btn-success"
          data-bs-dismiss="modal">
          Save
        </button>
      </div>
    </div>
  </div>
</div>

